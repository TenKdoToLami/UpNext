<header class="sticky top-0 z-50 h-24 flex items-center justify-center pointer-events-none px-4">
	<div
		class="pointer-events-auto bg-white/90 dark:bg-[#0c0c0e]/90 backdrop-blur-xl border border-zinc-200 dark:border-zinc-800/80 rounded-2xl shadow-2xl flex items-center p-2 gap-3 max-w-full">

		<!-- Logo & Info -->
		<div class="flex items-center gap-3 pl-2 pr-1 shrink-0">
			<img src="/static/img/logo.png" alt="UpNext" class="h-6 w-auto object-contain"
				onerror="this.style.display='none';">
			<span
				class="font-heading font-bold text-lg text-zinc-900 dark:text-white tracking-tight hidden sm:block">UpNext</span>
			<button onclick="openInfoModal()"
				class="p-1.5 rounded-lg text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-all hover:bg-black/5 dark:hover:bg-white/5"
				title="App Information">
				<i data-lucide="info" class="w-4 h-4"></i>
			</button>
		</div>

		<!-- Mobile Search Toggle -->
		<button id="searchMobileBtn" onclick="toggleSearch()"
			class="md:hidden p-2 rounded-lg text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-all hover:bg-black/5 dark:hover:bg-white/5 shrink-0">
			<i data-lucide="search" class="w-4 h-4"></i>
		</button>

		<!-- Search Bar Container -->
		<div id="searchBarContainer"
			class="hidden md:block md:relative group md:w-64 md:focus-within:w-72 lg:focus-within:w-96 transition-all duration-300 ease-out shrink-0 absolute inset-x-0 top-0 h-full md:h-auto bg-white dark:bg-[#0c0c0e] md:bg-transparent z-50 p-2 md:p-0 flex items-center gap-2">

			<!-- Mobile Back Button -->
			<button onclick="toggleSearch()"
				class="md:hidden p-2 mr-1 text-zinc-500 hover:text-zinc-900 dark:hover:text-white">
				<i data-lucide="arrow-left" class="w-5 h-5"></i>
			</button>

			<div class="relative w-full">
				<div
					class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-zinc-400 dark:text-zinc-500 group-focus-within:text-indigo-500 dark:group-focus-within:text-white transition-colors">
					<i data-lucide="search" class="w-4 h-4"></i>
				</div>
				<input type="text" id="searchInput" placeholder="Search..."
					class="w-full bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl pl-9 pr-8 py-2 text-sm focus:outline-none focus:border-indigo-500 dark:focus:border-zinc-600 focus:ring-1 focus:ring-indigo-500 dark:focus:ring-zinc-600 transition-all placeholder:text-zinc-400 dark:placeholder:text-zinc-600 text-zinc-900 dark:text-white font-medium">
				<button id="clearSearchBtn" onpointerdown="clearSearch(); event.preventDefault();"
					class="absolute right-2 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-900 dark:text-zinc-500 dark:hover:text-white hidden transition-colors">
					<i data-lucide="x" class="w-3 h-3"></i>
				</button>
			</div>
		</div>

		<div class="w-px h-8 bg-zinc-200 dark:bg-zinc-800 shrink-0 hidden md:block"></div>

		<!-- View Controls -->
		<div class="flex items-center gap-2 shrink-0">

			<!-- Mobile Sort Toggle -->
			<button id="sortMobileToggle" onclick="toggleSortMenu()"
				class="xl:hidden p-2 rounded-lg text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-all hover:bg-black/5 dark:hover:bg-white/5 relative">
				<i data-lucide="list-filter" class="w-4 h-4"></i>
				<!-- Active Indicator (optional) -->
				<span id="sortActiveIndicator"
					class="absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-indigo-500 rounded-full hidden"></span>
			</button>

			<!-- Sort Menu Container -->
			<div id="sortMenuContainer"
				class="hidden xl:flex items-center gap-2 absolute xl:relative top-full right-4 xl:top-auto xl:right-auto mt-2 xl:mt-0 bg-white/95 dark:bg-[#0c0c0e]/95 xl:bg-transparent border border-zinc-200 dark:border-zinc-800 xl:border-none p-4 xl:p-0 rounded-2xl shadow-2xl xl:shadow-none flex-col xl:flex-row min-w-[200px] xl:min-w-0 z-50 backdrop-blur-xl xl:backdrop-blur-none origin-top-right transition-all">

				<!-- Mobile Filters -->
				<div
					class="xl:hidden text-[10px] font-bold uppercase tracking-widest text-zinc-400 dark:text-zinc-600 mb-1 w-full mt-1">
					Type</div>
				<div class="grid grid-cols-3 gap-2 w-full xl:hidden mb-2" id="typeFiltersMobile"></div>

				<div
					class="xl:hidden text-[10px] font-bold uppercase tracking-widest text-zinc-400 dark:text-zinc-600 mb-1 w-full">
					Status</div>
				<div class="grid grid-cols-3 gap-2 w-full xl:hidden mb-2" id="statusFiltersMobile"></div>

				<div class="w-full h-px bg-zinc-200 dark:bg-zinc-800 my-2 xl:hidden"></div>

				<div
					class="xl:hidden text-[10px] font-bold uppercase tracking-widest text-zinc-400 dark:text-zinc-600 mb-2 w-full">
					Ordering</div>

				<div
					class="flex items-center gap-2 xl:gap-1 w-full xl:w-auto xl:bg-zinc-100 xl:dark:bg-zinc-900 xl:border xl:border-zinc-200 xl:dark:border-zinc-800 xl:p-1 xl:rounded-xl">
					<!-- Sort Config (Injected via JS) -->
					<div id="sortFieldFilters"
						class="flex gap-1 flex-wrap xl:flex-nowrap justify-center bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-1 rounded-xl flex-1 xl:flex-none xl:bg-transparent xl:dark:bg-transparent xl:border-none xl:p-0">
					</div>
					<div class="w-px h-4 bg-zinc-300 dark:bg-zinc-800 mx-1 hidden xl:block"></div>
					<div id="sortDirectionFilters"
						class="flex gap-1 xl:ml-0 bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-1 rounded-xl xl:bg-transparent xl:dark:bg-transparent xl:border-none xl:p-0">
					</div>
				</div>

				<div class="w-full h-px bg-zinc-200 dark:bg-zinc-800 my-2 xl:hidden"></div>
				<div
					class="xl:hidden text-[10px] font-bold uppercase tracking-widest text-zinc-400 dark:text-zinc-600 mb-2 w-full">
					View Options</div>

				<div
					class="flex items-center gap-1 bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 p-1 rounded-xl w-full xl:w-auto justify-center">
					<button onclick="toggleDetails()" id="detailsBtn"
						class="flex-1 xl:flex-none p-1.5 rounded-lg text-zinc-400 hover:text-zinc-900 dark:text-zinc-500 dark:hover:text-white transition-all hover:bg-black/5 dark:hover:bg-white/5 relative group flex items-center justify-center"
						title="Toggle Details">
						<i data-lucide="eye" class="w-4 h-4"></i>
						<span id="detailsIndicator"
							class="absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-indigo-500 rounded-full hidden"></span>
					</button>

					<button onclick="toggleMultiSelect()" id="multiSelectBtn"
						class="flex-1 xl:flex-none p-1.5 rounded-lg text-zinc-400 hover:text-zinc-900 dark:text-zinc-500 dark:hover:text-white transition-all hover:bg-black/5 dark:hover:bg-white/5 relative group flex items-center justify-center"
						title="Toggle Multiple Selection">
						<i data-lucide="list-checks" class="w-4 h-4"></i>
						<span id="multiSelectIndicator"
							class="absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-emerald-500 rounded-full hidden"></span>
					</button>

					<button onclick="toggleHidden()" id="hiddenBtn"
						class="flex-1 xl:flex-none p-1.5 rounded-lg text-zinc-400 hover:text-zinc-900 dark:text-zinc-500 dark:hover:text-white transition-all hover:bg-black/5 dark:hover:bg-white/5 relative group flex items-center justify-center"
						title="Toggle Hidden Items">
						<i data-lucide="shield-off" class="w-4 h-4"></i>
						<span id="hiddenIndicator"
							class="absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-red-500 rounded-full hidden"></span>
					</button>

					<button onclick="toggleHiddenOnly()" id="hiddenOnlyBtn"
						class="flex-1 xl:flex-none hidden p-1.5 rounded-lg text-zinc-400 hover:text-red-500 dark:text-zinc-500 dark:hover:text-red-400 transition-all hover:bg-red-500/10 relative group border border-transparent flex items-center justify-center"
						title="Filter Only Hidden">
						<i data-lucide="shield-alert" class="w-4 h-4"></i>
					</button>
				</div>
			</div>

			<!-- View Toggles (Theme/Grid/List) -->
			<div
				class="flex items-center gap-2 bg-white/50 dark:bg-zinc-900/50 p-1 rounded-lg border border-zinc-200 dark:border-white/10 backdrop-blur-md">
				<button onclick="window.toggleTheme()"
					class="p-2 rounded-md hover:bg-black/5 dark:hover:bg-white/10 text-zinc-600 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors"
					title="Toggle Theme">
					<i id="themeIcon" data-lucide="sun" class="w-4 h-4"></i>
				</button>
				<div class="w-px h-4 bg-zinc-300 dark:bg-white/10 mx-1"></div>
				<button id="view-grid" onclick="setViewMode('grid')"
					class="p-2 rounded-md transition-colors text-zinc-400 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white">
					<i data-lucide="layout-grid" class="w-4 h-4"></i>
				</button>
				<button id="view-list" onclick="setViewMode('list')"
					class="p-2 rounded-md transition-colors text-zinc-400 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white">
					<i data-lucide="list" class="w-4 h-4"></i>
				</button>
			</div>

			<div class="w-px h-8 bg-zinc-200 dark:bg-zinc-800 shrink-0 hidden md:block"></div>

			<!-- Action Buttons -->
			<div
				class="flex items-center gap-2 shrink-0 border-l border-zinc-200 dark:border-zinc-800/50 pl-1 md:border-none md:pl-0">
				<button onclick="window.openStatsModal()"
					class="bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-200 dark:hover:bg-zinc-700 p-2 rounded-xl flex items-center justify-center transition-all border border-zinc-200 dark:border-zinc-700 active:scale-95"
					title="Library Stats">
					<i data-lucide="pie-chart" class="w-4 h-4"></i>
				</button>
				<button onclick="openExportModal()"
					class="bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-200 dark:hover:bg-zinc-700 p-2 rounded-xl flex items-center justify-center transition-all border border-zinc-200 dark:border-zinc-700 active:scale-95"
					title="Export Library">
					<i data-lucide="download" class="w-4 h-4"></i>
				</button>
				<button onclick="openModal()"
					class="bg-zinc-900 dark:bg-white text-white dark:text-black hover:bg-zinc-700 dark:hover:bg-zinc-200 px-4 py-2 rounded-xl flex items-center gap-2 text-sm font-bold transition-all shadow-lg active:scale-95 whitespace-nowrap">
					<i data-lucide="plus" class="w-4 h-4"></i> <span class="hidden sm:inline">Add</span>
				</button>
			</div>

		</div>
</header>