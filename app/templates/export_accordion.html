<!DOCTYPE html>
<html lang="en" class="dark">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>UpNext Library Export (Interactive List)</title>
	<link rel="stylesheet" href="css/export_accordion.css">
</head>

<body>

	<div class="container">
		<h1>Library Export</h1>

		<div class="list">
			{% for item in items %}
			<div class="item-row">
				<details>
					<summary>
						<!-- Left Thumbnail (if cover enabled) -->
						{% if 'coverUrl' in fields and item.coverUrl %}
						<img src="{{ item.coverUrl }}" class="thumb" loading="lazy">
						{% elif 'coverUrl' in fields %}
						<div class="thumb no-thumb">No IMG</div>
						{% endif %}

						<div class="header-content">
							<div class="title">{{ item.title }}</div>
							<div class="meta-badges">
								{% if 'type' in fields %}<span class="badge">{{ item.type }}</span>{% endif %}
								{% if 'status' in fields %}<span class="badge">{{ item.status }}</span>{% endif %}
								{% if 'rating' in fields and item.rating %}<span class="badge" style="color:#fbbf24">{{
									RATING_MAP.get(item.rating, '') }}</span>{% endif %}
							</div>
						</div>

						<!-- Right Chevron -->
						<svg class="chevron" fill="none" viewBox="0 0 24 24" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
						</svg>
					</summary>

					<div class="expanded-content">
						<div class="grid-info">
							<!-- Large Cover if expanded -->
							{% if 'coverUrl' in fields and item.coverUrl %}
							<div>
								<img src="{{ item.coverUrl }}" class="cover-large" loading="lazy">
							</div>
							{% endif %}

							<div class="details-text">
								{% if 'authors' in fields and (item.authors or item.author) %}
								<div class="info-block">
									<h3>Creators</h3>
									<p>{{ (item.authors or [item.author])|join(', ') }}</p>
								</div>
								{% endif %}

								{% if 'universe' in fields and item.universe %}
								<div class="info-block">
									<h3>Universe</h3>
									<p>{{ item.universe }}</p>
								</div>
								{% endif %}

								{% if 'series' in fields and item.series %}
								<div class="info-block">
									<h3>Series</h3>
									<p>{{ item.series }} {% if item.seriesNumber %}#{{ item.seriesNumber }}{% endif %}
									</p>
								</div>
								{% endif %}

								{% if 'description' in fields and item.description %}
								<div class="info-block">
									<h3>Synopsis</h3>
									<div class="prose">{{ item.description }}</div>
								</div>
								{% endif %}

								{% if 'review' in fields and item.review %}
								<div class="info-block">
									<h3>Review</h3>
									<div class="prose"
										style="font-style: italic; border-left: 2px solid #333; padding-left: 12px;">{{
										item.review }}</div>
								</div>
								{% endif %}

								{% if 'notes' in fields and item.notes %}
								<div class="info-block">
									<h3>Notes</h3>
									<div class="prose" style="color: #a1a1aa;">{{ item.notes }}</div>
								</div>
								{% endif %}

								{% if 'externalLinks' in fields and item.externalLinks %}
								<div class="info-block links">
									<h3>Links</h3>
									{% for link in item.externalLinks %}
									<a href="{{ link.url }}" target="_blank">{{ link.label or 'Link' }}</a>
									{% endfor %}
								</div>
								{% endif %}
							</div>
						</div>
					</div>
				</details>
			</div>
			{% endfor %}
		</div>
	</div>

</body>

</html>