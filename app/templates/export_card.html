<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>UpNext Library Export (Card View - {{ now.strftime("%Y-%m-%d") }})</title>
	<link rel="stylesheet" href="css/export_card.css">
</head>

<body>
	<h1>UpNext Library Export (Card View - {{ now.strftime("%Y-%m-%d") }}) - {{ items|length }} Entries</h1>
	<div class="grid-container">
		{% if not items %}
		<p style="text-align:center; color:#999; font-size:16px; margin-top:50px;">No entries match the selected
			filters.</p>
		{% endif %}

		{% for item in items %}
		<!-- Card type class: media-Type -->
		<div class="card media-{{ item.type|replace(' ', '') }}">
			<!-- Cover -->
			<div class="cover-container">
				{% if 'coverUrl' in fields and item.coverUrl %}
				<img src="{{ item.coverUrl }}" class="cover" loading="lazy">
				{% else %}
				<div class="no-cover">{% if 'coverUrl' in fields %}No Image{% else %}N/A{% endif %}</div>
				{% endif %}
			</div>

			<!-- Badges -->
			<div class="badge-group">
				{% if 'progress' in fields and item.progress %}
				<span class="badge progress-badge">{{ item.progress }}</span>
				{% endif %}
				{% if 'type' in fields %}
				<span class="badge status-badge"
					style="color: {{ MEDIA_COLOR_MAP.get(item.type, '#333') }}; border-color: {{ MEDIA_COLOR_MAP.get(item.type, '#ccc') }};">
					{{ item.type }}
				</span>
				{% endif %}
			</div>

			<!-- Content -->
			<div class="content">
				<div class="title">{{ item.title|default('Untitled') }}</div>

				<!-- Meta -->
				{% set meta_items = [] %}
				{% if item.authors %}{% set _ = meta_items.append(item.authors|join(', ')) %}{% elif item.author %}{%
				set _ = meta_items.append(item.author) %}{% endif %}
				{% if 'universe' in fields and item.universe %}{% set _ = meta_items.append('U: ' + item.universe) %}{%
				endif %}
				{% if 'series' in fields and item.series %}
				{% set s_str = 'S: ' + item.series + (' #' + item.seriesNumber if item.seriesNumber else '') %}
				{% set _ = meta_items.append(s_str) %}
				{% endif %}

				{% if meta_items %}
				<div class="meta">{{ meta_items|join(', ') }}</div>
				{% endif %}

				<!-- Footer -->
				<div class="footer">
					<span class="rating-text">
						{% if 'rating' in fields and item.status in ['Completed', 'Anticipating'] and item.rating %}
						{{ RATING_MAP.get(item.rating, '') }}
						{% endif %}
					</span>
					{% if 'status' in fields %}
					<span class="status-text" style="color: {{ STATUS_TEXT_MAP.get(item.status, '#333') }};">
						{{ item.status }}
					</span>
					{% endif %}
				</div>
			</div>
		</div>
		{% endfor %}
	</div>
	<p style="text-align:center; margin-top: 30px; color:#999; font-size:12px;">Export generated by UpNext.</p>
</body>

</html>